!function(e){"use strict";window.engispace={initHeaderFunctions:function(){e(".es-user-profile-button button").on("click",function(){e(".es-user-profile-dropdown").toggleClass("active")})},initCourseSliders:function(){e("#courses-header-slider").owlCarousel({center:!1,items:1,loop:!0,margin:30,responsive:{1000:{items:1},600:{items:1}}}),e(".courses_slider").owlCarousel({center:!1,items:1,loop:!1,dots:!1,nav:!0,margin:20,responsive:{768:{items:5},480:{items:2}}})},initCourseItemHover:function(){let s;e(window).width()<1025||(e(".es-course-item").on("mouseover",function(){let a=e(this),o=a.width(),i=a.offset(),t=e(document).width(),n=i.left+o,r=i.left+o+10;s=a.closest(".es-site-courses-grid").find("#es-single-course-details-box"),a.removeClass("left-pseudo-element"),t-n<=340&&(a.addClass("left-pseudo-element"),s.addClass("left-pseudo-element"),r=i.left-o-90),s.html(""),a.find(".es-course-details").clone().appendTo(s),s.css("left",r),s.addClass("display")}).on("mouseleave",function(a){let o=e(this);a.relatedTarget&&"es-course-details"!==a.relatedTarget.className&&s.removeClass("display").html(""),o.removeClass("left-pseudo-element"),s.removeClass("left-pseudo-element")}),e(".es-single-course-details-box").on("mouseleave",function(){e(".es-single-course-details-box").removeClass("display").html("")}))},initSignIn:function(){e("#es-signin-form").on("submit",function(s){((s,a)=>{s.preventDefault();let o=a.find(".es-form-message");o.html("").removeClass("form-error form-success");const i=a.find("#login_email").val(),t=a.find("#login_password").val();if(!i||!t)return void o.html("Please enter email or password").removeClass("form-success").addClass("form-error");const n=a.serialize();e.ajax({url:engisapce_obj.ajaxurl,method:"POST",data:n,success:function(e){e.success?setTimeout(function(){window.location.href=engisapce_obj.siteurl+"/profile"},100):a.find(".es-form-message").html("Email or password did not match").addClass("form-error").removeClass("form-success")}})})(s,e(this))})},initSignUp:function(){e("#es-signup-form").validate({rules:{firstname:"required",lastname:"required",email:{required:!0,email:!0},password:{required:!0,minlength:8},password_confirm:{required:!0,minlength:8,equalTo:"#password"}},messages:{firstname:"Please enter your firstname",lastname:"Please enter your lastname",password:{required:"Please provide a password",minlength:"Your password must be at least 8 characters long"},password_confirm:{required:"Please provide a password",minlength:"Your password must be at least 8 characters long"},email:"Please enter a valid email address"},submitHandler:function(s){const a=e(s).find(".es-form-message"),o=e(s).serialize();a.html("").removeClass("form-error form-success"),e("#es-signup-form button[type=submit]").addClass("display"),e.ajax({url:engisapce_obj.ajaxurl,method:"POST",data:o,success:function(s){e("#es-signup-form button[type=submit]").removeClass("display"),s.success||"form_validation_failed"!==s.data&&"user_error"!==s.data?s.success||"user_exists"!==s.data?(s.success&&"user_created"===s.data&&a.html("Your account has been created").addClass("form-success").removeClass("form-error"),e("#es-signup-form")[0].reset(),setTimeout(function(){window.location.href=engisapce_obj.siteurl+"/profile"},100)):a.html("User already exists").addClass("form-error").removeClass("form-success"):a.html("There's something wrong with form validation").addClass("form-error").removeClass("form-success")}})}})},initAuthModal:function(){e(document).on("click","#es-open-signin-modal",function(){e("#site-auth-modal").addClass("display-modal").attr("modal-type","signin-modal")}),e("#es-open-signup-modal").on("click",function(){e("#site-auth-modal").addClass("display-modal").attr("modal-type","signup-modal")}),e(document).on("click",".close-modal",function(){e('.es-modal-wrapper[modal-type="auth-require-modal"]')&&e('.es-modal-wrapper[modal-type="auth-require-modal"]').remove(),e(".es-modal-wrapper").removeClass("display-modal")}),e(document).on("click","#es-open-signin-modal-from-auth",function(){e('.es-modal-wrapper[modal-type="auth-require-modal"]')&&e('.es-modal-wrapper[modal-type="auth-require-modal"]').remove(),e("#site-auth-modal").addClass("display-modal").attr("modal-type","signin-modal")}),e(document).on("click","#es-open-signup-modal-from-auth",function(){e('.es-modal-wrapper[modal-type="auth-require-modal"]')&&e('.es-modal-wrapper[modal-type="auth-require-modal"]').remove(),e("#site-auth-modal").addClass("display-modal").attr("modal-type","signup-modal")}),e(".es-btn-switch-to-login").on("click",function(){e("#site-auth-modal").attr("modal-type","signin-modal")}),e(".es-btn-switch-to-signup").on("click",function(){e("#site-auth-modal").attr("modal-type","signup-modal")}),e(".password-field-toggle").on("click",function(s){s.preventDefault();let a=e(this).closest(".es-form-control").find("input");e(this).hasClass("password-displayed")?a.attr("type","password"):a.attr("type","text"),e(this).toggleClass("password-displayed")}),e(document).on("click",".es-modal-wrapper",function(s){s.target.classList.contains("es-modal-wrapper")&&(e('.es-modal-wrapper[modal-type="auth-require-modal"]')&&e('.es-modal-wrapper[modal-type="auth-require-modal"]').remove(),e(".es-modal-wrapper").removeClass("display-modal"))})},initCoursePurchase:function(){e("#course-purchase-btn").on("click",function(){const s=e(this),a=s.data("course-info"),o=s.data("is-free-course");if(!s.hasClass("loading")){if(s.addClass("loading"),!engisapce_obj.user_logged_in)return e(".es-modal-wrapper.es-auth-require-modal").addClass("display-modal").attr("modal-type","auth-require-modal"),void(s=>{e.ajax({url:engisapce_obj.ajaxurl,method:"POST",data:{action:"es_auth_required_modal",nonce:engisapce_obj.nonce},success:function(a){s.removeClass("loading"),e("body").append(a.data)}})})(s);o?((s,a)=>{console.log(a),e.ajax({url:engisapce_obj.ajaxurl,method:"POST",data:{action:"es_free_course_purchase",nonce:engisapce_obj.nonce,course_id:a.id},success:function(e){e.success||s.removeClass("loading"),window.location.href=e.data}})})(s,a):((s,a)=>{e.ajax({url:engisapce_obj.ajaxurl,method:"POST",data:{action:"es_course_purchase_url",nonce:engisapce_obj.nonce,course_id:a.id},success:function(e){e.success||s.removeClass("loading"),window.location.href=e.data}})})(s,a)}})},initSocialShare:function(){e(".es-sc-share-btn").on("click",function(){e("#social-share-modal").addClass("display-modal")})},init:function(){window.engispace.initHeaderFunctions(),window.engispace.initCourseSliders(),window.engispace.initCourseItemHover(),window.engispace.initSignIn(),window.engispace.initSignUp(),window.engispace.initAuthModal(),window.engispace.initCoursePurchase(),window.engispace.initSocialShare()}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",window.engispace.init):window.engispace.init()}(jQuery);
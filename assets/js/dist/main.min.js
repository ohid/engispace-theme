!function(e){"use strict";window.engispace={initHeaderFunctions:function(){e(".es-user-profile-button button").on("click",function(){e(".es-user-profile-dropdown").toggleClass("active")})},initCourseSliders:function(){e("#courses-header-slider").owlCarousel({center:!1,items:1,loop:!0,margin:30,responsive:{1000:{items:1},600:{items:1}}}),e(".courses_slider").owlCarousel({center:!1,items:5,loop:!1,margin:20,responsive:{1400:{items:5},1024:{items:3},580:{items:2}}})},initCourseItemHover:function(){let s;e(".es-course-item").on("mouseover",function(){let o=e(this),a=o.width(),i=o.offset(),n=e(document).width(),t=i.left+a,r=i.left+a+10;s=o.closest(".es-site-courses-grid").find("#es-single-course-details-box"),o.removeClass("left-pseudo-element"),n-t<=340&&(o.addClass("left-pseudo-element"),s.addClass("left-pseudo-element"),r=i.left-a-90),s.html(""),o.find(".es-course-details").clone().appendTo(s),s.css("left",r),s.addClass("display")}).on("mouseleave",function(o){let a=e(this);o.relatedTarget&&"es-course-details"!==o.relatedTarget.className&&s.removeClass("display").html(""),a.removeClass("left-pseudo-element"),s.removeClass("left-pseudo-element")}),e(".es-single-course-details-box").on("mouseleave",function(){e(".es-single-course-details-box").removeClass("display").html("")})},initSignIn:function(){e("#es-signin-form").on("submit",function(s){((s,o)=>{s.preventDefault();let a=o.find(".es-form-message");a.html("").removeClass("form-error form-success");const i=o.find("#login_email").val(),n=o.find("#login_password").val();if(!i||!n)return void a.html("Please enter email or password").removeClass("form-success").addClass("form-error");const t=o.serialize();e.ajax({url:engisapce_obj.ajaxurl,method:"POST",data:t,success:function(e){e.success?window.location.reload():o.find(".es-form-message").html("Email or password did not match").addClass("form-error").removeClass("form-success")}})})(s,e(this))})},initSignUp:function(){e("#es-signup-form").validate({rules:{firstname:"required",lastname:"required",email:{required:!0,email:!0},password:{required:!0,minlength:8},password_confirm:{required:!0,minlength:8,equalTo:"#password"}},messages:{firstname:"Please enter your firstname",lastname:"Please enter your lastname",password:{required:"Please provide a password",minlength:"Your password must be at least 8 characters long"},password_confirm:{required:"Please provide a password",minlength:"Your password must be at least 8 characters long"},email:"Please enter a valid email address"},submitHandler:function(s){const o=e(s).find(".es-form-message"),a=e(s).serialize();o.html("").removeClass("form-error form-success"),e("#es-signup-form button[type=submit]").addClass("display"),e.ajax({url:engisapce_obj.ajaxurl,method:"POST",data:a,success:function(s){e("#es-signup-form button[type=submit]").removeClass("display"),s.success||"form_validation_failed"!==s.data&&"user_error"!==s.data?s.success||"user_exists"!==s.data?(s.success&&"user_created"===s.data&&o.html("Your account has been created").addClass("form-success").removeClass("form-error"),e("#es-signup-form")[0].reset(),setTimeout(function(){window.location.reload()},2e3)):o.html("User already exists").addClass("form-error").removeClass("form-success"):o.html("There's something wrong with form validation").addClass("form-error").removeClass("form-success")}})}})},initAuthModal:function(){e("#es-open-signin-modal").on("click",function(){e(".es-modal-wrapper").addClass("display-modal").attr("modal-type","signin-modal")}),e("#es-open-signup-modal").on("click",function(){e(".es-modal-wrapper").addClass("display-modal").attr("modal-type","signup-modal")}),e(".close-modal").on("click",function(){e(".es-modal-wrapper").removeClass("display-modal signin-modal signup-modal").attr("modal-type","")}),e(".es-btn-switch-to-login").on("click",function(){e(".es-modal-wrapper").attr("modal-type","signin-modal")}),e(".es-btn-switch-to-signup").on("click",function(){e(".es-modal-wrapper").attr("modal-type","signup-modal")})},initCoursePurchase:function(){e("#course-purchase-btn").on("click",function(){const s=e(this),o=s.data("course-info");s.hasClass("loading")||(s.addClass("loading"),((s,o)=>{e.ajax({url:engisapce_obj.ajaxurl,method:"POST",data:{action:"es_course_purchase_url",nonce:engisapce_obj.nonce,course_id:o.id},success:function(e){e.success||s.removeClass("loading"),window.location.href=e.data}})})(s,o))})},init:function(){window.engispace.initHeaderFunctions(),window.engispace.initCourseSliders(),window.engispace.initCourseItemHover(),window.engispace.initSignIn(),window.engispace.initSignUp(),window.engispace.initAuthModal(),window.engispace.initCoursePurchase()}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",window.engispace.init):window.engispace.init()}(jQuery);